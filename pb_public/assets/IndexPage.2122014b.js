import{c as ue,H as he,I as ge,J as _e,K as be,a as _,L as ye,g as Z,h as q,Q as E,M as xe,R as we,N as G,r as k,O as Ce,P as ke,S as Se,T as qe,U as $e,V as Fe,W as Ve,X as Ae,Y as ne,Z as ze,_ as Be,$ as je,i as Ie,a0 as Ne,z as J,a1 as ce,o as ee,a2 as Pe,A as F,E as L,F as g,a3 as X,G as p,a4 as l,a5 as M,a6 as De,a7 as N,a8 as Q,a9 as K,aa as P,B as T,ab as de,ac as me,C as se,ad as Le,ae as Me,af as Te,ag as Re,ah as oe,ai as Oe,aj as Qe,ak as Ee,al as Ue}from"./index.29a68900.js";import{Q as Ke,_ as Ye}from"./pocketkubelogo.9833cf42.js";import{_ as Xe}from"./plugin-vue_export-helper.21dcd24c.js";var We="./assets/pocketkubelogosmall.4b229418.svg",te="./assets/pblogo.9b167533.svg";const He={xs:8,sm:10,md:14,lg:20,xl:24};var Ze=ue({name:"QChip",props:{...he,...ge,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:n,emit:y}){const{proxy:{$q:x}}=Z(),r=_e(e,x),c=be(e,He),d=_(()=>e.selected===!0||e.icon!==void 0),i=_(()=>e.selected===!0?e.iconSelected||x.iconSet.chip.selected:e.icon),m=_(()=>e.iconRemove||x.iconSet.chip.remove),h=_(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),b=_(()=>{const a=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(a?` text-${a} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(h.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(r.value===!0?" q-chip--dark q-dark":"")}),w=_(()=>{const a=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},s={...a,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||x.lang.label.remove};return{chip:a,remove:s}});function A(a){a.keyCode===13&&B(a)}function B(a){e.disable||(y("update:selected",!e.selected),y("click",a))}function j(a){(a.keyCode===void 0||a.keyCode===13)&&(G(a),e.disable===!1&&(y("update:modelValue",!1),y("remove")))}function v(){const a=[];h.value===!0&&a.push(q("div",{class:"q-focus-helper"})),d.value===!0&&a.push(q(E,{class:"q-chip__icon q-chip__icon--left",name:i.value}));const s=e.label!==void 0?[q("div",{class:"ellipsis"},[e.label])]:void 0;return a.push(q("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},xe(n.default,s))),e.iconRight&&a.push(q(E,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&a.push(q(E,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:m.value,...w.value.remove,onClick:j,onKeyup:j})),a}return()=>{if(e.modelValue===!1)return;const a={class:b.value,style:c.value};return h.value===!0&&Object.assign(a,w.value.chip,{onClick:B,onKeyup:A}),ye("div",a,v(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[we,e.ripple]])}}});function D(e,n,y,x){const r=[];return e.forEach(c=>{x(c)===!0?r.push(c):n.push({failedPropValidation:y,file:c})}),r}function Y(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),G(e)}const Ge={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Je=["rejected"];function et({editable:e,dnd:n,getFileInput:y,addFilesToQueue:x}){const{props:r,emit:c,proxy:d}=Z(),i=k(null),m=_(()=>r.accept!==void 0?r.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),h=_(()=>parseInt(r.maxFiles,10)),b=_(()=>parseInt(r.maxTotalSize,10));function w(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&Ce(t);else{const V=y();V&&V!==t.target&&V.click(t)}}function A(t){e.value&&t&&x(null,t)}function B(t,V,R,O){let u=Array.from(V||t.target.files);const $=[],I=()=>{$.length!==0&&c("rejected",$)};if(r.accept!==void 0&&m.value.indexOf("*/")===-1&&(u=D(u,$,"accept",f=>m.value.some(C=>f.type.toUpperCase().startsWith(C)||f.name.toUpperCase().endsWith(C))),u.length===0))return I();if(r.maxFileSize!==void 0){const f=parseInt(r.maxFileSize,10);if(u=D(u,$,"max-file-size",C=>C.size<=f),u.length===0)return I()}if(r.multiple!==!0&&u.length!==0&&(u=[u[0]]),u.forEach(f=>{f.__key=f.webkitRelativePath+f.lastModified+f.name+f.size}),O===!0){const f=R.map(C=>C.__key);u=D(u,$,"duplicate",C=>f.includes(C.__key)===!1)}if(u.length===0)return I();if(r.maxTotalSize!==void 0){let f=O===!0?R.reduce((C,W)=>C+W.size,0):0;if(u=D(u,$,"max-total-size",C=>(f+=C.size,f<=b.value)),u.length===0)return I()}if(typeof r.filter=="function"){const f=r.filter(u);u=D(u,$,"filter",C=>f.includes(C))}if(r.maxFiles!==void 0){let f=O===!0?R.length:0;if(u=D(u,$,"max-files",()=>(f++,f<=h.value)),u.length===0)return I()}if(I(),u.length!==0)return u}function j(t){Y(t),n.value!==!0&&(n.value=!0)}function v(t){G(t),(t.relatedTarget!==null||ke.is.safari!==!0?t.relatedTarget!==i.value:document.elementsFromPoint(t.clientX,t.clientY).includes(i.value)===!1)===!0&&(n.value=!1)}function a(t){Y(t);const V=t.dataTransfer.files;V.length!==0&&x(null,V),n.value=!1}function s(t){if(n.value===!0)return q("div",{ref:i,class:`q-${t}__dnd absolute-full`,onDragenter:Y,onDragover:Y,onDragleave:v,onDrop:a})}return Object.assign(d,{pickFiles:w,addFiles:A}),{pickFiles:w,addFiles:A,onDragover:j,onDragleave:v,processFiles:B,getDndNode:s,maxFilesNumber:h,maxTotalSizeNumber:b}}const ie=["B","KB","MB","GB","TB","PB"];function tt(e){let n=0;for(;parseInt(e,10)>=1024&&n<ie.length-1;)e/=1024,++n;return`${e.toFixed(1)}${ie[n]}`}var lt=ue({name:"QFile",inheritAttrs:!1,props:{...Se,...qe,...Ge,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...$e,...Je],setup(e,{slots:n,emit:y,attrs:x}){const{proxy:r}=Z(),c=Fe(),d=k(null),i=k(!1),m=Ve(e),{pickFiles:h,onDragover:b,onDragleave:w,processFiles:A,getDndNode:B}=et({editable:c.editable,dnd:i,getFileInput:le,addFilesToQueue:ae}),j=Ae(e),v=_(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),a=_(()=>ne(v.value)),s=_(()=>v.value.map(o=>o.name).join(", ")),t=_(()=>tt(v.value.reduce((o,S)=>o+S.size,0))),V=_(()=>({totalSize:t.value,filesNumber:v.value.length,maxFiles:e.maxFiles})),R=_(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:m.value,...x,id:c.targetUid.value,disabled:c.editable.value!==!0})),O=_(()=>"q-file q-field--auto-height"+(i.value===!0?" q-file--dnd":"")),u=_(()=>e.multiple===!0&&e.append===!0);function $(o){const S=v.value.slice();S.splice(o,1),f(S)}function I(o){const S=v.value.indexOf(o);S>-1&&$(S)}function f(o){y("update:modelValue",e.multiple===!0?o:o[0])}function C(o){o.keyCode===13&&je(o)}function W(o){(o.keyCode===13||o.keyCode===32)&&h(o)}function le(){return d.value}function ae(o,S){const z=A(o,S,v.value,u.value),H=le();H!=null&&(H.value=""),z!==void 0&&((e.multiple===!0?e.modelValue&&z.every(pe=>v.value.includes(pe)):e.modelValue===z[0])||f(u.value===!0?v.value.concat(z):z))}function U(){return[q("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function ve(){if(n.file!==void 0)return v.value.length===0?U():v.value.map((S,z)=>n.file({index:z,file:S,ref:this}));if(n.selected!==void 0)return v.value.length===0?U():n.selected({files:v.value,ref:this});if(e.useChips===!0)return v.value.length===0?U():v.value.map((S,z)=>q(Ze,{key:"file-"+z,removable:c.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{$(z)}},()=>q("span",{class:"ellipsis",textContent:S.name})));const o=e.displayValue!==void 0?e.displayValue:s.value;return o.length!==0?[q("div",{class:e.inputClass,style:e.inputStyle,textContent:o})]:U()}function fe(){const o={ref:d,...R.value,...j.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:ae};return e.multiple===!0&&(o.multiple=!0),q("input",o)}return Object.assign(c,{fieldClass:O,emitValue:f,hasValue:a,inputRef:d,innerValue:v,floatingLabel:_(()=>a.value===!0||ne(e.displayValue)),computedCounter:_(()=>{if(e.counterLabel!==void 0)return e.counterLabel(V.value);const o=e.maxFiles;return`${v.value.length}${o!==void 0?" / "+o:""} (${t.value})`}),getControlChild:()=>B("file"),getControl:()=>{const o={ref:c.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return c.editable.value===!0&&Object.assign(o,{onDragover:b,onDragleave:w,onKeydown:C,onKeyup:W}),q("div",o,[fe()].concat(ve()))}}),Object.assign(r,{removeAtIndex:$,removeFile:I,getNativeElement:()=>d.value}),ze(r,"nativeEl",()=>d.value),Be(c)}});function at(){return Ie(Ne)}const nt={class:"row justify-between full-width"},st={class:"row col-10"},ot=l("img",{src:te,style:{width:"25px"}},null,-1),it={class:"text-h6 text-white q-ml-sm q-pt-xs"},rt={class:"row reverse col-2 custom_track q-mb-md"},ut={class:"col-4 text-caption text-white q-pt-xs"},ct=l("strong",null,"CPU: ",-1),dt={class:"col-4 text-caption text-white q-pt-xs"},mt=l("strong",null,"RAM: ",-1),vt={class:"col-4 text-caption text-white q-pt-xs"},ft=l("strong",null,"Storage: ",-1),pt={class:"col-6"},ht=l("label",null,"Processing file",-1),gt=l("div",{class:"row items-center no-wrap"},[l("img",{src:te,style:{width:"25px"}}),l("label",{class:"q-ml-sm text-grey-10"},"Admin")],-1),_t=l("div",{class:"row items-center no-wrap"},[l("label",{class:"q-ml-sm text-grey-10"},"Delete")],-1),bt=J({__name:"AppCardv2",props:{app:{type:Object,required:!0},deleteMode:{type:Boolean,required:!0}},setup(e){const n=e,y=ce(),x=at(),r=k(!1),c=k(0),d=k(),i=()=>{const h=window.location.protocol,b=window.location.hostname,w=`${h}//${b}/${n.app.title}/_/`;window.open(w,"_blank")},m=()=>{console.log("deleting",n.app),x.dialog({dark:!0,title:"You are about to delete an app",message:"This action is irreversable. Please repeat the app name",prompt:{model:"",isValid:h=>h===n.app.title,type:"text"},cancel:!0,persistent:!0}).onOk(h=>{y.deleteApp(n.app.id)})};return ee(()=>{const h=window.location.protocol,b=window.location.hostname,w=`${h}//${b}/${n.app.title}/api/health`;setInterval(async()=>{try{(await Pe.get(w)).status===200?r.value=!0:r.value=!1}catch{}c.value++},5e3)}),(h,b)=>(F(),L(X,{class:"app-card-bg",flat:""},{default:g(()=>[p(N,{class:"q-pb-none"},{default:g(()=>[l("div",nt,[l("div",st,[ot,l("div",it,M(e.app.title)+" - "+M(c.value),1)]),l("div",rt,[p(De,{modelValue:e.app.active,"onUpdate:modelValue":b[0]||(b[0]=w=>e.app.active=w),size:"xs"},null,8,["modelValue"])])])]),_:1}),p(N,{class:"q-pt-none"},{default:g(()=>[l("div",ut,[ct,Q(" "+M(e.app.cpu),1)]),l("div",dt,[mt,Q(" "+M(e.app.ram),1)]),l("div",vt,[ft,Q(" "+M(e.app.storage),1)])]),_:1}),!e.deleteMode&&r.value?(F(),L(N,{key:0,class:"row justify-between"},{default:g(()=>[l("div",pt,[p(lt,{modelValue:d.value,"onUpdate:modelValue":b[1]||(b[1]=w=>d.value=w),accept:".zip",dense:"",class:"file-picker","label-color":"cyan-2",color:"cyan-2",label:"Upload Frontend",filled:"",clearable:""},{prepend:g(()=>[d.value?K("",!0):(F(),L(E,{key:0,name:"attach_file",color:"cyan-2"}))]),file:g(()=>[ht]),_:1},8,["modelValue"])]),p(P,{color:"cyan-2",push:"",onClick:i},{default:g(()=>[gt]),_:1})]),_:1})):K("",!0),!e.deleteMode&&!r.value?(F(),L(N,{key:1,class:"row justify-center"},{default:g(()=>[p(X,{"inline-actions":"",class:"text-white bg-red q-pa-sm",style:{height:"40px"}},{default:g(()=>[Q(" This service is currently not online ")]),_:1})]),_:1})):K("",!0),e.deleteMode?(F(),L(N,{key:2,class:"row justify-end"},{default:g(()=>[p(P,{color:"deep-orange-10",push:"",onClick:m,style:{height:"40px"}},{default:g(()=>[_t]),_:1})]),_:1})):K("",!0)]),_:1}))}});const yt=e=>(Le("data-v-77928ab0"),e=e(),Me(),e),xt=["onAnimationiteration"],wt={style:{transform:"translate(0%, 0%)"},width:"20",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ct=yt(()=>l("path",{d:"M15.7796 0.984292C15.8239 -0.107384 17.3364 -0.347323 17.7164 0.677062L22.6987 14.1105C22.8401 14.4916 23.198 14.7492 23.6042 14.7623L37.4024 15.2056C38.4891 15.2405 38.7473 16.7399 37.7349 17.1363L25.7201 21.8399C25.3521 21.984 25.1034 22.3314 25.0857 22.7262L24.402 37.943C24.3535 39.0231 22.8634 39.2685 22.4712 38.2609L17.1352 24.555C16.9803 24.1573 16.5901 23.9017 16.1637 23.9186L1.60545 24.4956C0.531225 24.5382 0.155715 23.0874 1.11571 22.6034L14.6655 15.773C14.9897 15.6096 15.1999 15.2833 15.2146 14.9205L15.7796 0.984292Z",fill:"#D976F2"},null,-1)),kt=[Ct],St=J({__name:"Sparkle",props:{amount:{type:Number,default:3},width:{type:Number},height:{type:Number},style:{type:Object}},setup(e){const n=e,y=k(),x=k([]),r=_(()=>({position:"relative",width:`${n.width}px`,height:`${n.height}px`,...n.style})),c=d=>{const i=x.value.find(m=>m.id===d);i&&(i.active=!1,i.posX=Math.random()*100,i.posY=Math.random()*100,setTimeout(()=>{i.active=!0},1500+Math.random()*1500))};return ee(async()=>{let d=0;for(let i=0;i<n.amount;i++)setTimeout(()=>{x.value.push({id:d++,posX:Math.random()*100,posY:Math.random()*100,active:!0})},500+Math.random()*1500)}),(d,i)=>(F(),T("div",{ref_key:"container",ref:y,class:"sparkle-container",style:se(r.value)},[(F(!0),T(de,null,me(x.value.filter(m=>m.active),m=>(F(),T("div",{key:`sparkle-${m.id}`,class:"sparkle",onAnimationiteration:h=>c(m.id),style:se({left:m.posX+"%",top:m.posY+"%"})},[(F(),T("svg",wt,kt))],44,xt))),128))],4))}});var re=Xe(St,[["__scopeId","data-v-77928ab0"]]);const qt={id:"header",class:"row full-width justify-around q-mb-md"},$t=l("div",{class:"col-1 col-xs-2"},[l("img",{src:We,class:"lt-md",style:{width:"35px"}}),l("img",{src:Ye,class:"gt-sm",style:{width:"200px"}})],-1),Ft={class:"col-xs-8 col-sm-6 col-lg-4 q-mt-sm"},Vt={class:"col-2 row reverse items-start"},At={id:"sub-header",class:"row full-width justify-center"},zt={class:"row col-xs-12 col-md-10 col-lg-8"},Bt={class:"row q-pa-sm col-12"},jt=l("div",{class:"col-xs-7 col-md-4 col-lg-3"},[l("strong",null,"bogsynth"),Q(".pocketkube.com ")],-1),It={class:"col-xs-2 col-md-4 col-lg-2"},Nt={class:"col-xs-3 col-md-4 col-lg-7 row reverse"},Pt=l("div",{class:"row items-center no-wrap"},[l("img",{src:te,style:{width:"25px"}}),l("label",{class:"q-ml-sm text-grey-10"},"New")],-1),Dt={id:"apps",class:"row full-width justify-center q-mb-xl"},Lt={class:"row col-xs-12 col-md-10 col-lg-8 q-mb-xl"},Mt=l("div",{class:"text-h6 text-center text-white"},"Name your new backend",-1),Tt=l("div",{class:"row items-center no-wrap"},[l("label",{class:"q-ml-sm text-grey-10"},"Create App")],-1),Et=J({__name:"IndexPage",setup(e){const n=ce(),{apps:y,pb:x}=Te(n),r=Re(),c=k(!1),d=k(!1),i=k(""),m=k(""),h=k(""),b=k(!1);function w(a){return a.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}const A=()=>{if(i.value=w(i.value),m.value="",i.value.length<2||i.value.length>20){m.value="Title must be between 2 and 20 characters long";return}y.value.find(s=>s.title===i.value)&&(m.value="An app with this name already exists")},B=async a=>{if(a){c.value=!0;try{await n.createApp(i.value)}catch(s){console.log("Could not create app"),console.log(s)}c.value=!1}d.value=!1,i.value=""},j=()=>{x.value.authStore.clear(),r.push("/login")},v=_(()=>h.value===""||!h.value?y.value:y.value.filter(a=>a.title.toLowerCase().includes(h.value.toLowerCase())));return ee(()=>{n.init();const a=document.getElementById("header"),s=document.getElementById("sub-header"),t=document.getElementById("apps");!a||!s||!t||(t.style.maxHeight=window.innerHeight-(a.getBoundingClientRect().height+s.getBoundingClientRect().height)+"px",t.style.overflowY="scroll")}),(a,s)=>(F(),L(Ke,{class:"row column items-start justify-start q-pa-lg"},{default:g(()=>[l("div",qt,[$t,l("div",Ft,[p(oe,{class:"q-mb-lg full-width",dense:"",modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=t=>h.value=t),placeholder:"Search",outlined:"",rounded:"","bg-color":"white","input-style":{color:"black"}},{prepend:g(()=>[p(E,{name:"search"})]),_:1},8,["modelValue"])]),l("div",Vt,[p(P,{push:"",color:"cyan-2","text-color":"black",round:"",icon:"logout",style:{height:"45px",width:"45px"},onClick:j}),p(P,{push:"",class:"q-mr-md",flat:"",color:"deep-orange-10","text-color":"deep-orange-10",round:"",icon:b.value===!1?"settings":"close",style:{height:"45px",width:"45px"},onClick:s[1]||(s[1]=t=>b.value=!b.value)},null,8,["icon"])])]),l("div",At,[l("div",zt,[l("div",Bt,[p(X,{class:"row app-card-bg full-width q-pa-md text-white items-center",flat:""},{default:g(()=>[jt,l("div",It,[l("label",null,[l("strong",null,"APPS:"+M(Oe(y).length),1)])]),l("div",Nt,[p(P,{color:"cyan-2",push:"",onClick:s[2]||(s[2]=t=>d.value=!0)},{default:g(()=>[Pt]),_:1})])]),_:1})])])]),l("div",Dt,[l("div",Lt,[(F(!0),T(de,null,me(v.value,t=>(F(),T("div",{class:"col q-pa-sm col-xs-12 col-sm-6 col-lg-4",key:t.id},[p(bt,{app:t,"delete-mode":b.value},null,8,["app","delete-mode"])]))),128))])]),p(Ue,{modelValue:d.value,"onUpdate:modelValue":s[7]||(s[7]=t=>d.value=t),persistent:"",bordered:""},{default:g(()=>[p(X,{style:{"min-width":"350px",position:"relative",overflow:"visible","background-color":"#282828"},class:"app-card-bg q-pa-sm"},{default:g(()=>[p(re,{style:{position:"absolute",top:"-5px",right:"10px"},amount:4,width:45,height:35}),p(re,{style:{position:"absolute",top:"-5px",left:"-20px"},amount:4,width:45,height:35}),p(N,null,{default:g(()=>[Mt]),_:1}),p(N,{class:"q-pt-none"},{default:g(()=>[p(oe,{borderless:"",filled:"","hide-bottom-space":"","hide-hint":"",modelValue:i.value,"onUpdate:modelValue":[s[3]||(s[3]=t=>i.value=t),A],autofocus:"",onKeyup:s[4]||(s[4]=Qe(t=>d.value=!1,["enter"])),color:"white","input-style":{color:"white"},error:m.value!=="","error-message":m.value,debounce:250},null,8,["modelValue","error","error-message"])]),_:1}),p(Ee,{align:"right",class:"text-white"},{default:g(()=>[p(P,{flat:"",label:"Cancel",onClick:s[5]||(s[5]=t=>B(!1)),disable:c.value},null,8,["disable"]),p(P,{color:"cyan-2",push:"",onClick:s[6]||(s[6]=t=>B(!0)),loading:c.value,disable:m.value!==""},{default:g(()=>[Tt]),_:1},8,["loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Et as default};
